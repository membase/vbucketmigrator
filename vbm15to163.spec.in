%define bin_name vbm15to163

Name:           vbm15to163
Version:        @VERSION@
Release:        @RELEASE@%{?dist}
Summary:        Membase compatible migrator for 1.5.x to 1.6 >= 1.6.3

Group:          System Environment/Daemons
License:        Apache 2
URL:            http://www.membase.org/
#Source0:        http://memcached.googlecode.com/files/%{name}-@FULLVERSION@.tar.gz
BuildRoot:      %{_topdir}/BUILD

#Requires: initscripts
#Requires(post): /sbin/chkconfig
#Requires(preun): /sbin/chkconfig, /sbin/service
#Requires(postun): /sbin/service
#Conflicts: memcached

%description
This special, one-off vbucketmigrator is designed to migrate data from
membase 1.5-1.6.1 to membase 1.6 from 1.6.3 on.

Forward compatiblity beyond 1.6 is not guaranteed.

%prep

%build

# Default configs
#mkdir -p %{buildroot}/%{_sysconfdir}/sysconfig
#cat <<EOF >%{buildroot}/%{_sysconfdir}/sysconfig/%{bin_name}
#USER="nobody"
#MAXCONN="16384"
#OPTIONS="-Z downstream_max=1024,downstream_conn_max=8 -s /var/run/%{bin_name}/%{bin_name}.sock"
# Add a -z 11211=downstream1:11211,downstream2:11211 or
# a -z /path/to/absolute/config/file with a similar setup in the file
#EOF

# pid directory
#mkdir -p %{buildroot}/%{_localstatedir}/run/%{bin_name}

%clean

%files
%defattr(-,root,root,-)
%{_bindir}/%{bin_name}
%{_mandir}/*

%changelog
* Wed Dec  01 2010 Matt Ingenthron <matt@membase.com>  - 1.6.3
- Assembled for testing
